---
layout: ../../layouts/Project.astro
title: Alpost
description: Feature-rich and easy-to-use online website builder that allows the creation of a web presence for American Legion Posts using multi-tenant architecture.
image: /images/main-alpost.png
---

import GridCard from '../../components/GridCard.astro';
import Button from '../../components/Button.astro';
import { Image } from '@astrojs/image/components';

<GridCard spacing={true}>

# Alpost

ALPost is a webiste builder for american legion posts. I designed and built this project from scratch. Clients can signin with google to get access to the CMS that manages their website. Clients can create news articles, post events, manage their members and applicants, view and respond to messages from visitors, and much more.

## Technologies

- React / Next.js
- TypeScript
- Tailwind CSS
- tRPC
- Prisma
- Stripe

[View Site](https://alpost.org)

<Image
	src="/images/full-alpost.png"
	alt="Screenshot of alpost homepage"
	width={1920}
	height={2318}
	fit="cover"
	position="top"
	class="w-full bg-stone-800"
/>

</GridCard>

<GridCard spacing={true}>

## Purpose and Goal

After returning home from a deployment, I wanted to start freelancing. I came across a local business directory for the town I grew up in and began reaching out to various buisnesses.

I opened the link to the local American Legion Post and to no suprise, it looked aged. In the footer of the page I found a link to the service they were using to create the webpage. I explored other legion websites and found they were using the same service.

I tried out their demo and was astonished by how unintuitive the experience was. I knew I could create something better. Something more modern and easy to use.

I proceded to spend months learning and building out small demos to confirm that I could build something like this.

</GridCard>

<GridCard spacing={true}>

## Problems and Thought Process

My first though was I could create a template and duplicate the codebase everytime I found a legion that wanted a new website. After building the template I realized that this approach would not be sustainable. I would have to clone the repo, change the copy, setup new environment variables, push the code to a hosting platform, buy a domain, configure the DNS, setup a CMS, etc.

### Plan B

I wanted a way to automate everything said above. I opened up my podcast player and saw a podcast labeled ["Potluck - Multi Tenant Apps, JS Sprinkles, Kids Coding, Server Error Handling"](https://syntax.fm/show/448/potluck-multi-tenant-apps-js-sprinkles-kids-coding-server-error-handling) by Syntax. I imedietly knew that this is what I needed.

I began working on a [repo to showcase basic multi-tenant architecture](https://github.com/raymondkneipp/multi-tenant-via-subdomain) and hosted it on a digital ocean droplet. I installed caddy server to handle SSL certs and handle wildcard domains. At the time, I was using only react so all the pages were rendered on the client and that was going to be no good for performance and SEO.

### Plan C

Thank goodness for [Vercel's Platform Starter Kit](https://vercel.com/guides/nextjs-multi-tenant-application). The only problem was I have never used Prisma, PlanetScale, or NextAuth.js, and the codebase was honestly intimidating. Rather than forking the repo and conforming it for my needs and just relying on the magic to make it work, I wanted to figure out what made it worked. I went through every file and figured out what everything was responsible for and took the code I needed and used it in my project.

</GridCard>

<GridCard spacing={true}>

## Lessons Learned

Plan A never works. I did learn a bit about Next.js middleware. This is the crucial piece of code that lets this app work. Using middleware I am able to rewrite the url based on the domain to route to a specific website.

As I was building this app I stumbled upon the [t3 stack](https://create.t3.gg) and I used it to build out the admin dashboard and CMS. I've never had a more satisfiing developer experience.

According to the US Department of Veterans Affairs, about 130,428 US veterans are legally blind, and around one million veterans have low vision. Although I am not an accessibility expert, I did do my dudiligence to be as accomidating as possible. I incorporated a light and dark theme to accomidate users with low vision and light sensitivity and used proper contrast. I utilized HeadlessUI to create keyboard accessible navigation menus.

Working on ALPost has taught me the concept of multitenantcy. I have future plans to use this technique in future projects.

</GridCard>
